# Computer Engineering Project

__Authors:__ _Giovanni Vaccarino - NicolÃ² Vacis_

__Supervising Professor:__ _Antonio Miele_

This README explains the two fault injection campaigns developed for the project. The first framework includes the study of the resilience evaluation of Visual Transformers, while the second one focuses on the resilience of some convolutional algorithms. This document provides detailed instructions on how to use each script, including the required command line parameters and example commands.

## Framework for the resilience evaluation of ViT
The first framework is composed by three scripts, contained in the Framework_ViT directory: 
1. GenerateFaultList.py 
2. FaultInjection.py
3. GraphAnalysis.py

__NOTE:__ In order to run these scripts, it is required to have the following libraries installed: torch, torchvision, tqdm, numpy, pandas

### GenerateFaultList
This first script of the framework generates a Fault List in a CSV format, given the following command line parameters:
1. _injections_number_ -> the total number of injections that the fault list will contain
2. _weights_path_ -> the path of the file containg the weights of the model
3. _csv_output_path_ -> the path of where you want to save your generated fault list

To run the GenerateFaultList.py you can use the following command:

```python
python GenerateFaultList.py --injections_number <desired_number_of_injections> --weights_path <path_of_weights> --csv_output_path <desired_output_path>
```

### FaultInjection
This script representing the main executing environment, providing the output on a CSV file, given the following command line parameters:
1. _csv_input_path_ -> the path of the fault list used
2. _csv_output_path_ -> the path of the desired to save your generated fault list
3. _weights_path_ -> the path of the file containg the weights of the model
4. _dataset_path_ -> the path of the dataset
5. _dataset_percentage_ -> the percentage of the dataset that will be used 
6. _numbers_selected_txt_path_ -> the path of the txt file on which will be saved the id of the images to use from the dataset

To run the FaultInjection.py you can use the following command:

```python
python FaultInjection.py --csv_input_path <path_of_fault_list> --csv_output_path <desired_output_path> --weights_path <path_of_weights> --dataset_path <path_of_dataset> --dataset_percentage <percentage_of_dataset> --numbers_selected_txt_path <path_of_numbers_selected>
```

### GraphAnalysis
This script generates the analysis graphs, given the following command line parameters:
1. _file_path_ -> the path of the output file generated by FaultInjection.py
2. _weights_path_ -> the path of the file containg the weights of the model

To run the GraphAnalysis.py you can use the following command:

```python
python GraphAnalysis.py --file_path <injection_output_path> --weights_path <path_of_weights>
```


## Framework for the resilience evaluation of different convolution algorithms
The second framework is composed by three scripts, contained in the Framework_Conv_Algs directory: 
1. GenerateFaultList.py 
2. FaultInjection.cpp
3. GraphAnalysis.py

__NOTE:__ In order to run these scripts, it is required to have the following libraries installed: cuda, cdnn, numpy, pandas

### GenerateFaultList
This first script of the framework generates a Fault List in a CSV format, given the following command line parameters:
1. _injections_number_ -> the total number of injections that the fault list will contain
2. _bin_file_tensors_ -> the path of where you want to save your tensors
3. _csv_output_path_ -> the path of where you want to save your generated fault list

To run the GenerateFaultList.py you can use the following command:

```python
python GenerateFaultList.py --injections_number <desired_number_of_injections> --bin_file_tensors <path_of_tensors> --csv_output_path <desired_output_path>
```

### FaultInjection
This script representing the main executing environment, providing the output on a CSV file, given the following command line parameters:
1. _bin_file_tensors_ -> the path of where the tensors are saved
2. _csv_input_path_ -> the path of the fault list used
3. _csv_output_path_ -> the path of the desired to save your generated fault list

_name_executable_ is the desired name for the .exe file.
First it is necessary to compile using the following command:

```bash
nvcc -o <name_executable> FaultInjection.cpp -lcudnn
```

Now to run use the following command:

```bash
./<name_executable> <bin_file_tensors> <csv_input_path> <csv_output_path>
```

### GraphAnalysis
This script generates the analysis graphs, given the following command line parameters:
1. _fileFaultInj_path_ -> the path of the output file generated by FaultInjection.py
2. _faultList_path_ -> the path of the FaultList file

To run the GraphAnalysis.py you can use the following command:

```python
python GraphAnalysis.py --fileFaultInj_path <injection_output_path> --faultList_path <path_of_faultList>
```
